Тема 4. Основы синтаксиса SQL в PostgreSQL:
  1. Как использовать ALL для проверки условия для всех значений набора? Пример реализации.
  2. Как документировать пользовательские типы и изменять их без потери данных? Пример реализации.
  3. Как использовать агрегаты в подзапросах для расчёта показателей? Пример реализации.
  4. Как упорядочить результаты запроса с ORDER BY и указать направление сортировки? Пример реализации.
  5. Как считать агрегаты по группам с GROUP BY? Пример реализации.
  6. Как сгруппировать по вычисляемому значению (например, дата → год/месяц)? Пример реализации.
  7. Чем COALESCE отличается от NVL/IFNULL в других СУБД? Пример реализации.
  8. Как избегать N+1 подзапросов и заменить их одним набором JOIN/CTE? Пример реализации.
  9. Как писать безопасные подзапросы, избегающие NULL‑ловушек с IN/NOT IN? Пример реализации.
  10. Как экранировать спецсимволы в SIMILAR TO? Пример реализации.
  11. Как выбирать только уникальные строки с DISTINCT и когда это уместно? Пример реализации.
  12. Как использовать квантификаторы в SIMILAR TO (+, *, ?, {m,n})? Пример реализации.
  13. Как проверить формат email/телефона на базовом уровне с SIMILAR TO? Пример реализации.
  14. Как фильтровать группы с HAVING и в чём разница с WHERE? Пример реализации.
  15. Как проверить существование записей через подзапрос вместо подсчёта COUNT(*)? Пример реализации.
  16. Как использовать составной тип как тип столбца? Пример реализации.
  17. Как использовать подзапрос в списке SELECT для вычисления агрегата по связанной таблице? Пример реализации.
  18. Как использовать подзапрос в FROM как временную таблицу (derived table)? Пример реализации.
  19. Как написать условие «существует хотя бы одна связанная запись» с EXISTS? Пример реализации.
  20. Как упорядочить результат группировки по агрегатным столбцам? Пример реализации.
  21. Как группировать сразу по нескольким столбцам и выражениям? Пример реализации.
  22. Как выбирать конкретные столбцы вместо звёздочки и давать им псевдонимы? Пример реализации.
  23. Как ограничить результаты подзапроса и передать их во внешний запрос? Пример реализации.
  24. Как комбинировать агрегаты с оконными функциями (но без группировки результатов)? Пример реализации.
  25. Как правильно выбирать столбцы в SELECT при GROUP BY? Пример реализации.
  26. Что такое ENUM и когда он полезен для ограниченного набора значений? Пример реализации.
  27. Как использовать NULLIF, чтобы избежать деления на ноль или конфликтов? Пример реализации.
  28. Как объединять результаты нескольких запросов через UNION и UNION ALL? Пример реализации.
  29. Как оптимизировать GROUP BY индексами и предварительной фильтрацией? Пример реализации.
  30. Что такое запрос SELECT и какова его базовая форма (SELECT … FROM …)? Пример реализации.
  31. Как использовать COALESCE для подстановки значений по умолчанию? Пример реализации.
  32. Как заменить NULL или код ошибки на понятную метку через CASE? Пример реализации.
  33. Как ограничить количество строк в результате с LIMIT и OFFSET? Пример реализации.
  34. Как объединить агрегат в подзапросе с деталями во внешнем запросе? Пример реализации.
  35. Чем DOMAIN отличается от базового типа и зачем он нужен? Пример реализации.
  36. Как работает оператор EXISTS и чем он отличается от IN? Пример реализации.
  37. Как вычислять выражения и функции прямо в списке SELECT? Пример реализации.
  38. Как агрегировать строки в одну строку с string_agg? Пример реализации.
  39. Как хранить и выбирать поля составного типа? Пример реализации.
  40. Как сделать сводку с несколькими показателями (COUNT, SUM, AVG) за раз? Пример реализации.
  41. Как использовать подзапросы для проверки ссылочной целостности нестандартных правил? Пример реализации.
  42. Что такое выражение CASE и какие формы оно имеет (simple, searched)? Пример реализации.
  43. Как использовать подзапрос для вычисления рангов/топ-N по группе? Пример реализации.
  44. Как выделить категории на основе диапазонов значений через CASE? Пример реализации.
  45. Как проверять деление на ноль и пропуски данных в агрегатах? Пример реализации.
  46. В чём разница между коррелированным и некоррелированным подзапросом? Пример реализации.
  47. Как создать DOMAIN с CHECK‑ограничением? Пример реализации.
  48. Какие базовые агрегаты существуют (COUNT, SUM, AVG, MIN, MAX) и для чего? Пример реализации.
  49. Когда CTE материализуется/не материализуется в современных версиях PostgreSQL? Пример реализации.
  50. Как использовать LATERAL JOIN вместо коррелированного подзапроса? Пример реализации.
  51. Как написать условие «не существует ни одной связанной записи» с NOT EXISTS? Пример реализации.
  52. Как превратить булевы условия в метки «Да»/«Нет» через CASE? Пример реализации.
  53. Как сравнить число с подзапросом через > ANY и > ALL — в чём разница? Пример реализации.
  54. Как фильтровать строки в запросе с помощью WHERE? Пример реализации.
  55. Как использовать DISTINCT ON для выборки по ключу вместо агрегирования? Пример реализации.
  56. Как CASE влияет на тип результата и приведение типов? Пример реализации.
  57. Как проверять целостность группировок тестовыми подмножествами? Пример реализации.
  58. Как тестировать и профилировать подзапросы (EXPLAIN/ANALYZE, enable_* GUC)? Пример реализации.
  59. Как группировать по условию (CASE внутри GROUP BY)? Пример реализации.
  60. Чем отличается COUNT(*) от COUNT(column)? Пример реализации.
  61. Как выполнить агрегирование по выражениям и функциональным ключам? Пример реализации.
  62. Как совместить EXISTS с дополнительными фильтрами внешнего запроса? Пример реализации.
  63. Как записать анти‑соединение через NOT EXISTS и чем оно лучше LEFT JOIN … IS NULL? Пример реализации.
  64. Как оформить сложный запрос так, чтобы он оставался читаемым и поддерживаемым? Пример реализации.
  65. Как использовать = ANY для упрощения выражений c IN в PostgreSQL? Пример реализации.
  66. Как отсекать малые группы с HAVING после агрегирования? Пример реализации.
  67. Как изменить ENUM, добавив новое значение (ADD VALUE …)? Пример реализации.
  68. Когда выбирать SIMILAR TO вместо LIKE и наоборот? Пример реализации.
  69. Как вынести повторяющийся подзапрос в CTE и улучшить читаемость? Пример реализации.
  70. Как применять CASE прямо в GROUP BY/HAVING? Пример реализации.
  71. Как использовать подстановки и шаблоны поиска в текстовых колонках? Пример реализации.
  72. Как использовать подзапрос в WHERE с оператором IN для фильтрации? Пример реализации.
  73. Как строить условия с EXISTS с учетом производительности (индексы, лимит)? Пример реализации.
  74. Как переписать NOT IN на NOT EXISTS с учётом NULL‑значений? Пример реализации.
  75. Как использовать ANY для сравнения значения с набором (value = ANY(array/subquery))? Пример реализации.
  76. Что такое составной (composite) тип и как его определить? Пример реализации.
  77. Что такое подзапрос и где его можно использовать (SELECT, FROM, WHERE)? Пример реализации.
  78. Как использовать COALESCE в ORDER BY для управления сортировкой NULL? Пример реализации.
  79. Как агрегировать уникальные значения (COUNT(DISTINCT …), SUM(DISTINCT …))? Пример реализации.
  80. Как связать внешний запрос с подзапросом (коррелированный подзапрос)? Пример реализации.
  81. Как писать читаемые шаблоны SIMILAR TO и сопровождать их тестами? Пример реализации.
  82. Как считать долю группы от общего итога через оконные функции? Пример реализации.
  83. Как использовать ROLLUP/CUBE/GROUPING SETS в PostgreSQL? Пример реализации.
  84. Как ограничить подзапрос TOP‑N на каждую группу (ROW_NUMBER + фильтр)? Пример реализации.
  85. Как задать шаблон с альтернативами через | в SIMILAR TO? Пример реализации.
  86. Как создать ENUM‑тип со списком допустимых значений? Пример реализации.
  87. Как отрицать совпадение шаблона через NOT SIMILAR TO? Пример реализации.
  88. Как выбирать данные из нескольких таблиц с JOIN в разделе FROM? Пример реализации.
  89. Как создавать анти‑и полу‑соединения через EXISTS/NOT EXISTS? Пример реализации.
  90. Как проверить, что строка состоит только из цифр с SIMILAR TO? Пример реализации.
  91. Как сравнить производительность SIMILAR TO и POSIX‑регекса? Пример реализации.
  92. Как упрощать CASE с помощью GREATEST/LEAST и bool‑выражений? Пример реализации.
  93. Как посчитать агрегат по подмножеству строк с FILTER (WHERE …)? Пример реализации.
  94. Как избежать ошибки «column must appear in the GROUP BY clause»? Пример реализации.
  95. Как переписать подзапрос с IN в EXISTS и когда это выгодно? Пример реализации.
  96. Что такое SIMILAR TO и как он соотносится с LIKE и POSIX‑регекс? Пример реализации.
  97. Когда подзапрос можно заменить на JOIN и почему это иногда быстрее? Пример реализации.
  98. Как использовать DOMAIN в таблице и наследовать его ограничения? Пример реализации.
  99. Как комбинировать COALESCE и NULLIF в одном выражении? Пример реализации.
  100. Как использовать массивы с ANY/ALL без подзапросов? Пример реализации.

================================================================================

