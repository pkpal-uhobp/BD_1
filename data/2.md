### 1. Как указать комментарий к таблице и столбцам (COMMENT ON)? Пример реализации.
**Идея:** Комментарии помогают документировать схему прямо в БД и видны через `psql \d+` и в системных вью.
```sql
-- Комментарий к таблице
COMMENT ON TABLE public.students IS 'Студенты учебного заведения';

-- Комментарии к столбцам
COMMENT ON COLUMN public.students.id IS 'Первичный ключ';
COMMENT ON COLUMN public.students.email IS 'Уникальный e-mail студента';
```

---

### 2. Как проверить существование таблицы/схемы перед созданием? Пример реализации.
**Идея:** Для таблиц используйте `CREATE TABLE IF NOT EXISTS`, для схем — `CREATE SCHEMA IF NOT EXISTS`.
```sql
-- Схема
CREATE SCHEMA IF NOT EXISTS academy;

-- Таблица
CREATE TABLE IF NOT EXISTS academy.students (
  id         BIGSERIAL PRIMARY KEY,
  full_name  TEXT NOT NULL
);
```
Альтернатива через `to_regclass` (для логики в DO-блоках):
```sql
DO $$
BEGIN
  IF to_regclass('academy.students') IS NULL THEN
    EXECUTE $$CREATE TABLE academy.students (id BIGSERIAL PRIMARY KEY, full_name TEXT NOT NULL)$$;
  END IF;
END$$;
```

---

### 3. Как валидировать и нормализовать входные данные до INSERT на уровне БД? Пример реализации.
**Идея:** Нормализация — триггер (убрать пробелы, привести к нижнему регистру), валидация — через `CHECK`.
```sql
-- Таблица пользователей
CREATE TABLE users (
  id     BIGSERIAL PRIMARY KEY,
  email  TEXT UNIQUE NOT NULL CHECK (email ~* '^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$'),
  name   TEXT NOT NULL,
  phone  TEXT
);

-- Функция-триггер: очистка перед вставкой или обновлением
CREATE OR REPLACE FUNCTION normalize_user()
RETURNS trigger AS $$
BEGIN
  NEW.email := lower(trim(NEW.email));
  NEW.name  := trim(NEW.name);
  IF NEW.phone IS NOT NULL THEN
    NEW.phone := regexp_replace(NEW.phone, '\D', '', 'g'); -- оставить только цифры
  END IF;
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

-- Триггер
CREATE TRIGGER trg_normalize_user
BEFORE INSERT OR UPDATE ON users
FOR EACH ROW EXECUTE FUNCTION normalize_user();
```

---

### 4. Как дать имя ограничению и зачем это может быть полезно? Пример реализации.
**Идея:** Именованные ограничения проще искать/отключать/переиспользовать в миграциях.
```sql
CREATE TABLE accounts (
  id        BIGSERIAL PRIMARY KEY,
  email     TEXT NOT NULL,
  CONSTRAINT uq_accounts_email UNIQUE (email),      -- понятное имя
  CONSTRAINT chk_email_nonempty CHECK (email <> '') -- явное имя 
);

-- Удаление/временное отключение по имени
ALTER TABLE accounts DROP CONSTRAINT uq_accounts_email;
```

---

### 5. Что такое оператор SQL и из каких частей он состоит (ключевые слова, идентификаторы, литералы)? Пример реализации.
**Определение:** Оператор SQL — законченное выражение, состоящее из **ключевых слов** (`SELECT`, `INSERT`), **идентификаторов** (имена схем/таблиц/столбцов) и **литералов** (константы: строковые, числовые, булевы и т.д.).
```sql
SELECT full_name, age        -- ключевое слово SELECT, идентификаторы столбцов
FROM   public.students       -- ключевое слово FROM, идентификатор таблицы
WHERE  age >= 18;            -- литерал 18 и оператор сравнения
```

---

### 6. Как хранить логические значения BOOLEAN? Пример реализации.
**Идея:** Тип `BOOLEAN` с литералами `TRUE/FALSE` (принимает также `1/0`, `'t'/'f'`).
```sql
CREATE TABLE flags (
  id   BIGSERIAL PRIMARY KEY,
  is_active BOOLEAN NOT NULL DEFAULT TRUE,
  is_deleted BOOLEAN NOT NULL DEFAULT FALSE
);

INSERT INTO flags (is_active, is_deleted) VALUES (TRUE, FALSE);
```

---

### 7. Как добавить/снять CHECK‑ограничение? Пример реализации.
```sql
-- Добавить именованное CHECK
ALTER TABLE students
  ADD CONSTRAINT chk_age_nonnegative CHECK (age >= 0);

-- Удалить CHECK по имени
ALTER TABLE students
  DROP CONSTRAINT chk_age_nonnegative;
```

---

### 8. Что такое ENUM‑тип и когда его целесообразно применять? Пример реализации.
**Идея:** `ENUM` — ограниченный набор значений на уровне типа. Полезен, когда список редкий/стабильный и важна валидация на уровне БД.
```sql
CREATE TYPE mood AS ENUM ('happy', 'sad', 'neutral');

CREATE TABLE persons (
  id   BIGSERIAL PRIMARY KEY,
  name TEXT NOT NULL,
  state mood NOT NULL DEFAULT 'neutral'
);

-- Добавление нового значения (с PostgreSQL 10+)
ALTER TYPE mood ADD VALUE 'angry';
```

---

### 9. Как добавить новый столбец с DEFAULT и NOT NULL без «перезаписи» всей таблицы? Пример реализации.
**Идея (PostgreSQL 11+):** Метаданные‑только операция при **константном DEFAULT**.
```sql
ALTER TABLE orders
  ADD COLUMN created_at timestamptz NOT NULL DEFAULT now();
```
> Для версий до 11: сначала `ADD COLUMN ... DEFAULT ...`, затем `ALTER COLUMN ... SET NOT NULL` после бэкфилла — чтобы избежать блокировок.

---

### 10. Как спроектировать таблицу с PK, FK, NOT NULL, UNIQUE и CHECK для учебного примера? Пример реализации.
```sql
CREATE TABLE groups (
  id   BIGSERIAL PRIMARY KEY,
  code TEXT NOT NULL UNIQUE CHECK (code ~ '^[A-Z]{2}-\d{3}$')
);

CREATE TABLE students (
  id         BIGSERIAL PRIMARY KEY,
  full_name  TEXT NOT NULL,
  email      TEXT NOT NULL UNIQUE,
  group_id   BIGINT NOT NULL REFERENCES groups(id) ON UPDATE CASCADE ON DELETE RESTRICT,
  age        INT NOT NULL CHECK (age BETWEEN 16 AND 120)
);
```

---

### 11. Как обеспечить ссылочную целостность при обновлениях и удалениях? Пример реализации.
**Идея:** Настроить поведение через `ON UPDATE`/`ON DELETE`.
```sql
-- Пример разных стратегий:
-- CASCADE: удаление родителя удаляет детей
-- SET NULL: при удалении родителя ссылка в детях обнуляется
-- RESTRICT/NO ACTION: запрещает удаление/изменение при наличии детей

CREATE TABLE parent (id BIGSERIAL PRIMARY KEY);
CREATE TABLE child  (
  id BIGSERIAL PRIMARY KEY,
  parent_id BIGINT REFERENCES parent(id)
    ON UPDATE CASCADE
    ON DELETE SET NULL
);
```

---

### 12. Как задать ограничение на значение числового столбца (например, grade от 0 до 100)? Пример реализации.
```sql
ALTER TABLE marks
  ADD CONSTRAINT chk_grade_0_100 CHECK (grade BETWEEN 0 AND 100);
```

---

### 13. Как вставлять массивы (ARRAY[...]) и JSON/JSONB‑литералы? Пример реализации.
```sql
CREATE TABLE samples (
  id   BIGSERIAL PRIMARY KEY,
  tags TEXT[],
  meta JSONB
);

INSERT INTO samples(tags, meta) VALUES
  (ARRAY['sql','pg','demo'], '{"author":"dasha","score":5, "ok": true}'::jsonb);
```

---

### 14. Как задать столбец с автообновляемой меткой времени (DEFAULT now())? Пример реализации.
**Идея:** `DEFAULT now()` ставит время вставки; для авто‑обновления на UPDATE используйте триггер.
```sql
CREATE TABLE docs (
  id          BIGSERIAL PRIMARY KEY,
  created_at  timestamptz NOT NULL DEFAULT now(),
  updated_at  timestamptz NOT NULL DEFAULT now()
);

CREATE OR REPLACE FUNCTION set_updated_at()
RETURNS trigger AS $$
BEGIN
  NEW.updated_at := now();
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER trg_set_updated_at
BEFORE UPDATE ON docs
FOR EACH ROW EXECUTE FUNCTION set_updated_at();
```

---

### 15. Как проверить, какие строки нарушают предполагаемое ограничение перед его включением? Пример реализации.
**Идея:** Напишите запрос, который находит нарушения будущего CHECK/UNIQUE/FK.
```sql
-- Пример для CHECK (grade BETWEEN 0 AND 100)
SELECT * FROM marks WHERE NOT (grade BETWEEN 0 AND 100);

-- Пример для FK: ищем детей без родителя
SELECT c.*
FROM child c
LEFT JOIN parent p ON p.id = c.parent_id
WHERE c.parent_id IS NOT NULL AND p.id IS NULL;

-- Пример для UNIQUE(email)
SELECT email, COUNT(*)
FROM students
GROUP BY email
HAVING COUNT(*) > 1;
```

---

### 16. Как создать таблицу только если её ещё нет (IF NOT EXISTS)? Пример реализации.
```sql
CREATE TABLE IF NOT EXISTS audit_log (
  id     BIGSERIAL PRIMARY KEY,
  event  TEXT NOT NULL,
  at     timestamptz NOT NULL DEFAULT now()
);
```

---

### 17. Как задать ограничения на даты (например, дата рождения не в будущем)? Пример реализации.
```sql
ALTER TABLE persons
  ADD CONSTRAINT chk_birthdate_past CHECK (birth_date <= current_date);
```

---

### 18. Что такое зарезервированные ключевые слова SQL и можно ли их использовать как имена? Пример реализации.
**Идея:** Зарезервированные слова — часть синтаксиса. Использовать их как идентификаторы можно **только** в двойных кавычках, но лучше избегать.
```sql
CREATE TABLE "user" (        -- так можно, но не рекомендуется
  "select" INT,              -- тоже можно, но неудобно
  "from"   TEXT
);
-- Рекомендуется: users(select_col INT, from_col TEXT) с обычными именами.
```

---

### 19. Какие есть однострочные и многострочные комментарии в SQL? Пример реализации.
```sql
-- Однострочный комментарий начинается с двойного дефиса

/*
Многострочный комментарий
можно растянуть на несколько строк
*/
```

---

### 20. Как реализовать ссылку на запись в той же таблице (самоссылка, иерархии)? Пример реализации.
**Идея:** FK на собственный PK (например, дерево категорий). При удалении родителя — `SET NULL`/`RESTRICT`/`CASCADE` по задаче.
```sql
CREATE TABLE categories (
  id          BIGSERIAL PRIMARY KEY,
  name        TEXT NOT NULL,
  parent_id   BIGINT REFERENCES categories(id)
               ON UPDATE CASCADE
               ON DELETE SET NULL
);

-- Пример вставки: подкатегория ссылается на родителя
INSERT INTO categories(name, parent_id) VALUES ('Ноутбуки', NULL);       -- корень
INSERT INTO categories(name, parent_id) VALUES ('Игровые', 1);           -- потомок
```

---


### 21. Как вставлять строковые значения с кавычками и спецсимволами (экранирование)? Пример реализации.
**Идея:** Одинарные кавычки экранируются удвоением (`''`). Внутри строк допускаются спецпоследовательности через `E''`.
```sql
INSERT INTO messages(text) VALUES ('It''s a beautiful day');
INSERT INTO logs(comment) VALUES (E'Путь к файлу: C:\\data\\input.txt\nOK');
```
> `E''` включает поддержку `\n`, `\t`, `\uXXXX` и т.д.

---

### 22. Что такое первичный ключ (PRIMARY KEY) и какие свойства он обеспечивает? Пример реализации.
**Идея:** `PRIMARY KEY` — уникальный не NULL идентификатор строки. Автоматически создаёт уникальный индекс.
```sql
CREATE TABLE students (
  id SERIAL PRIMARY KEY,
  name TEXT NOT NULL
);
```
> Обеспечивает уникальность и ссылочную целостность через FOREIGN KEY.

---

### 23. Как запретить вставку дубликатов естественного ключа (UNIQUE на столбце)? Пример реализации.
```sql
CREATE TABLE employees (
  id SERIAL PRIMARY KEY,
  email TEXT UNIQUE NOT NULL
);
```
> Дубликаты e-mail вызовут ошибку `duplicate key value violates unique constraint`.

---

### 24. Чем отличается JSON от JSONB и когда какой выбирать? Пример реализации.
| Характеристика | JSON | JSONB |
|----------------|-------|--------|
| Хранение | текст (как есть) | бинарное (оптимизировано) |
| Доступ по ключам | медленнее | быстрее, индексируется |
| Сохраняет порядок полей | да | нет |
| Размер | меньше | больше |
| Подходит для | логов, истории | запросов, фильтрации |

```sql
CREATE TABLE docs (
  id SERIAL PRIMARY KEY,
  raw_json  JSON,
  parsed    JSONB
);

INSERT INTO docs VALUES (1, '{"a":1,"b":2}', '{"a":1,"b":2}');
```

---

### 25. Как задать внешний ключ на составной первичный ключ другой таблицы? Пример реализации.
```sql
CREATE TABLE courses (
  dept TEXT,
  code INT,
  title TEXT,
  PRIMARY KEY (dept, code)
);

CREATE TABLE enrollments (
  student_id INT,
  dept TEXT,
  code INT,
  FOREIGN KEY (dept, code) REFERENCES courses(dept, code)
);
```

---

### 26. Как добавить/снять NOT NULL у столбца? Пример реализации.
```sql
-- Добавить ограничение
ALTER TABLE users ALTER COLUMN email SET NOT NULL;

-- Снять ограничение
ALTER TABLE users ALTER COLUMN email DROP NOT NULL;
```

---

### 27. Как задать столбец с вычисляемым значением (GENERATED ... AS STORED)? Пример реализации.
```sql
CREATE TABLE items (
  price NUMERIC(10,2),
  qty   INT,
  total NUMERIC(10,2) GENERATED ALWAYS AS (price * qty) STORED
);

INSERT INTO items(price, qty) VALUES (99.9, 2);
SELECT * FROM items; -- total = 199.8
```
> PostgreSQL 12+ поддерживает `GENERATED ALWAYS AS (...) STORED`.

---

### 28. Как запретить вставку NULL в обязательные поля и отлавливать ошибки? Пример реализации.
```sql
CREATE TABLE products (
  id SERIAL PRIMARY KEY,
  name TEXT NOT NULL
);

-- Попытка вставки NULL
INSERT INTO products(name) VALUES (NULL); -- Ошибка: null value in column "name"
```
> Проверка выполняется автоматически, ошибка `23502`.

---

### 29. Когда полезен атрибут DEFERRABLE/INITIALLY DEFERRED у ограничений? Пример реализации.
**Идея:** Позволяет откладывать проверку ограничений (обычно FK) до конца транзакции.
```sql
CREATE TABLE accounts (
  id SERIAL PRIMARY KEY,
  parent_id INT,
  CONSTRAINT fk_self FOREIGN KEY (parent_id)
    REFERENCES accounts(id)
    DEFERRABLE INITIALLY DEFERRED
);
```
> Полезно при взаимных ссылках и пакетных обновлениях.

---

### 30. Как изменить тип данных столбца (ALTER TABLE ... ALTER COLUMN TYPE)? Пример реализации.
```sql
ALTER TABLE orders
  ALTER COLUMN total TYPE NUMERIC(12,2)
  USING total::NUMERIC;
```
> `USING` задаёт выражение преобразования при смене типа.

---

### 31. Как проверить текущее состояние ссылок и зависимостей между таблицами? Пример реализации.
```sql
-- Список внешних ключей
SELECT conname, conrelid::regclass AS table_name, confrelid::regclass AS references_table
FROM pg_constraint
WHERE contype = 'f';
```

---

### 32. Как вставлять значения с указанием схемы таблицы (schema.table)? Пример реализации.
```sql
INSERT INTO academy.students (full_name, age)
VALUES ('Анна Котова', 20);
```
> Если таблица не в `search_path`, нужно указывать схему явно.

---

### 33. Что такое DOMAIN и чем он отличается от простого типа? Пример реализации.
**Идея:** DOMAIN — тип с встроенными ограничениями и значением по умолчанию.
```sql
CREATE DOMAIN grade_percent AS INT
  CHECK (VALUE BETWEEN 0 AND 100);

CREATE TABLE exams (
  id SERIAL PRIMARY KEY,
  result grade_percent
);
```
> Повторное использование одного правила в разных таблицах.

---

### 34. Какие основные типы данных поддерживает PostgreSQL (общая картина)? Пример реализации.
- **Числовые:** `SMALLINT`, `INTEGER`, `BIGINT`, `NUMERIC`, `REAL`, `DOUBLE PRECISION`
- **Символьные:** `CHAR(n)`, `VARCHAR(n)`, `TEXT`
- **Дата/время:** `DATE`, `TIME`, `TIMESTAMP`, `INTERVAL`
- **Булевы:** `BOOLEAN`
- **Массивы:** `type[]`
- **JSON/JSONB**
- **Составные типы:** `ROW`
- **UUID, ENUM, DOMAIN, BYTEA`**

```sql
CREATE TABLE sample (
  id UUID DEFAULT gen_random_uuid(),
  payload JSONB,
  created_at TIMESTAMP DEFAULT now()
);
```

---

### 35. Чем отличаются RESTRICT, NO ACTION, CASCADE, SET NULL и SET DEFAULT? Пример реализации.
| Действие      | Поведение при удалении родителя            |
| ------------- | ------------------------------------------ |
| `RESTRICT`    | Запрещает удаление, если есть потомки      |
| `NO ACTION`   | Проверка в конце команды (аналог RESTRICT) |
| `CASCADE`     | Удаляет связанные строки                   |
| `SET NULL`    | Заменяет ссылку на NULL                    |
| `SET DEFAULT` | Ставит значение по умолчанию               |

```sql
CREATE TABLE orders (
  id SERIAL PRIMARY KEY,
  customer_id INT REFERENCES customers(id) ON DELETE CASCADE
);
```

---

### 36. Как подготовить минимальный набор DDL/INSERT для демонстрации ссылочной целостности? Пример реализации.
```sql
CREATE TABLE authors (
  id SERIAL PRIMARY KEY,
  name TEXT
);

CREATE TABLE books (
  id SERIAL PRIMARY KEY,
  title TEXT,
  author_id INT REFERENCES authors(id) ON DELETE CASCADE
);

INSERT INTO authors(name) VALUES ('Толстой');
INSERT INTO books(title, author_id) VALUES ('Война и мир', 1);
DELETE FROM authors WHERE id = 1; -- книга тоже удалится
```

---

### 37. Чем отличается CREATE от ALTER и DROP в управлении объектами БД? Пример реализации.
- `CREATE` — создаёт объект (таблицу, тип, схему и т.д.).  
- `ALTER` — изменяет структуру существующего объекта.  
- `DROP` — удаляет объект.

```sql
CREATE TABLE t(a INT);
ALTER TABLE t ADD COLUMN b INT;
DROP TABLE t;
```

---

### 38. Как задать ограничение на список допустимых значений (ENUM/проверка CHECK IN)? Пример реализации.
```sql
CREATE TABLE status_demo (
  state TEXT CHECK (state IN ('new', 'processing', 'done'))
);

-- Альтернатива через ENUM
CREATE TYPE state_enum AS ENUM ('new', 'processing', 'done');
CREATE TABLE status_enum_demo (state state_enum);
```

---

### 39. Как добавить/снять FOREIGN KEY у существующей таблицы? Пример реализации.
```sql
-- Добавить
ALTER TABLE orders
  ADD CONSTRAINT fk_orders_customers FOREIGN KEY (customer_id)
  REFERENCES customers(id) ON DELETE CASCADE;

-- Снять
ALTER TABLE orders DROP CONSTRAINT fk_orders_customers;
```

---

### 40. Как задаётся схема и квалифицированные имена объектов (schema.table)? Пример реализации.
```sql
CREATE SCHEMA store;

CREATE TABLE store.products (
  id SERIAL PRIMARY KEY,
  name TEXT
);

-- Обращение к объекту с указанием схемы
SELECT * FROM store.products;
```

### 41. Как гарантировать уникальность естественного ключа вместе с суррогатным PK? Пример реализации.
**Идея:** Делайте суррогатный `PRIMARY KEY` (id) и отдельное `UNIQUE` по естественному ключу (например, email). При необходимости — частичный UNIQUE (только для `WHERE deleted_at IS NULL`).
```sql
CREATE TABLE customers (
  id          BIGSERIAL PRIMARY KEY,           -- суррогатный ключ
  email       TEXT NOT NULL,
  deleted_at  timestamptz,
  CONSTRAINT uq_customers_email UNIQUE (email) -- уникальность естественного ключа
  -- либо частично:
  -- CREATE UNIQUE INDEX uq_email_active ON customers(email) WHERE deleted_at IS NULL;
);
```

---

### 42. Как вставлять булевы значения (true/false, 't'/'f', 1/0)? Пример реализации.
**Идея:** Тип `BOOLEAN` принимает `TRUE/FALSE`, `'t'/'f'`, `1/0` (последние два приводятся).
```sql
CREATE TABLE flags (
  id BIGSERIAL PRIMARY KEY,
  ok BOOLEAN NOT NULL
);

INSERT INTO flags(ok) VALUES
  (TRUE), (FALSE), ('t'), ('f'), (1), (0);
```

---

### 43. Какие существуют классы команд SQL: DDL, DML, DCL, TCL? Пример реализации.
- **DDL** (определение данных): `CREATE`, `ALTER`, `DROP`  
- **DML** (манипулирование): `SELECT`, `INSERT`, `UPDATE`, `DELETE`  
- **DCL** (контроль доступа): `GRANT`, `REVOKE`  
- **TCL** (транзакции): `BEGIN`, `COMMIT`, `ROLLBACK`, `SAVEPOINT`
```sql
BEGIN;               -- TCL
CREATE TABLE t(a int);  -- DDL
INSERT INTO t VALUES (1); -- DML
COMMIT;              -- TCL
```

---

### 44. Как создать таблицу с набором столбцов базовых типов? Пример реализации.
```sql
CREATE TABLE demo_types (
  id           BIGSERIAL PRIMARY KEY,
  name         VARCHAR(100) NOT NULL,
  note         TEXT,
  price        NUMERIC(10,2),
  qty          INTEGER DEFAULT 0,
  created_at   TIMESTAMPTZ DEFAULT now(),
  active       BOOLEAN DEFAULT TRUE,
  payload      JSONB,
  tags         TEXT[]
);
```

---

### 45. Как создать составной первичный ключ? Пример реализации.
```sql
CREATE TABLE schedule (
  room_id   INT,
  day_of_week INT,       -- 1..7
  slot      INT,         -- порядковый номер слота
  PRIMARY KEY (room_id, day_of_week, slot)
);
```

---

### 46. Как выполнить UPSERT (ON CONFLICT DO UPDATE ... EXCLUDED ...)? Пример реализации.
```sql
CREATE TABLE stock (
  sku TEXT PRIMARY KEY,
  qty INT NOT NULL
);

INSERT INTO stock AS s (sku, qty)
VALUES ('A-001', 5)
ON CONFLICT (sku) DO UPDATE
SET qty = s.qty + EXCLUDED.qty;  -- EXCLUDED = значения из попытки INSERT
```

---

### 47. Как сделать уникальность по нескольким столбцам (уникальный составной ключ)? Пример реализации.
```sql
CREATE TABLE enrollments (
  student_id INT NOT NULL,
  course_id  INT NOT NULL,
  CONSTRAINT uq_enrollments UNIQUE (student_id, course_id)
);
```

---

### 48. Как сделать столбец обязательным только при выполнении условия (условный CHECK)? Пример реализации.
**Идея:** Используйте логическое следование (импликацию): если условие выполняется, поле обязано быть не `NULL`.
```sql
CREATE TABLE payments (
  id        BIGSERIAL PRIMARY KEY,
  status    TEXT NOT NULL CHECK (status IN ('new','paid','failed')),
  paid_at   TIMESTAMPTZ,
  CONSTRAINT chk_paid_has_timestamp CHECK (
    status <> 'paid' OR paid_at IS NOT NULL
  )
);
```

---

### 49. Как переименовать таблицу и столбец (ALTER TABLE ... RENAME ...)? Пример реализации.
```sql
ALTER TABLE reports RENAME TO report_items;
ALTER TABLE report_items RENAME COLUMN created TO created_at;
```

---

### 50. Как добавить/снять PRIMARY KEY у существующей таблицы? Пример реализации.
```sql
-- Добавить PK (если нет и столбец уникален/не NULL)
ALTER TABLE logs ADD CONSTRAINT logs_pkey PRIMARY KEY (id);

-- Снять PK
ALTER TABLE logs DROP CONSTRAINT logs_pkey;
```

---

### 51. Какая должна быть последовательность вставки при наличии FK‑зависимостей? Пример реализации.
**Идея:** Сначала родительские записи, затем дочерние. Альтернатива — `DEFERRABLE` + `SET CONSTRAINTS ALL DEFERRED` в транзакции.
```sql
BEGIN;
INSERT INTO authors(id, name) VALUES (1, 'Лем');
INSERT INTO books(title, author_id) VALUES ('Солярис', 1);
COMMIT;
```

---

### 52. Как хранить двоичные данные в типе BYTEA? Пример реализации.
**Идея:** Храните как `BYTEA`. Вставка через hex-литерал `\x...` или `decode(...,'hex')`.
```sql
CREATE TABLE files (
  id BIGSERIAL PRIMARY KEY,
  fname TEXT,
  data BYTEA
);

INSERT INTO files(fname, data)
VALUES ('pic.png', '\x89504e470d0a1a0a'::bytea); -- начало PNG (пример)
```

---

### 53. Чем отличается TIMESTAMP WITH TIME ZONE от без часового пояса? Пример реализации.
- `TIMESTAMP WITHOUT TIME ZONE` — просто дата‑время без зоны; интерпретация зависит от клиентской таймзоны.  
- `TIMESTAMPTZ` (`WITH TIME ZONE`) — хранит абсолютное мгновение; при выводе приводится к текущей таймзоне сессии.
```sql
CREATE TABLE events (
  start_at  TIMESTAMPTZ,          -- предпочтительно для «момента»
  local_note TIMESTAMP            -- локальная отметка без TZ
);
```

---

### 54. Нужно ли индексировать столбец внешнего ключа и почему это важно? Пример реализации.
**Идея:** Да, обычно **нужно**. Индекс ускоряет `JOIN` и проверки целостности/удаления родителя.
```sql
CREATE INDEX ON books(author_id);  -- для FK books.author_id -> authors.id
```

---

### 55. Что такое внешний ключ (FOREIGN KEY) и как он обеспечивает ссылочную целостность? Пример реализации.
**Идея:** FK гарантирует, что значение в дочерней таблице существует в родительской (или обрабатывается правилом ON DELETE/UPDATE).
```sql
CREATE TABLE authors (id INT PRIMARY KEY, name TEXT);
CREATE TABLE books (
  id INT PRIMARY KEY,
  title TEXT,
  author_id INT REFERENCES authors(id) ON DELETE RESTRICT
);
```

---

### 56. Чем SERIAL отличается от IDENTITY и что лучше использовать сейчас? Пример реализации.
**Идея:** `SERIAL` — синтаксический сахар над `SEQUENCE` + `DEFAULT nextval(...)`. `IDENTITY` — стандарт SQL:2011.
Рекомендуется `GENERATED BY DEFAULT AS IDENTITY` (или `ALWAYS`) в новых схемах.
```sql
CREATE TABLE t_identity (
  id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  name TEXT
);
```

---

### 57. Как обеспечить целостность при вставке записей со связью родитель‑потомок? Пример реализации.
**Идея:** Оборачивайте в транзакцию; вставляйте родителя, затем дочерние; используйте `RETURNING` для PK.
```sql
BEGIN;
INSERT INTO authors(name) VALUES ('Стругацкие') RETURNING id; -- допустим id=2
INSERT INTO books(title, author_id) VALUES
  ('Пикник на обочине', 2),
  ('Трудно быть богом', 2);
COMMIT;
```

---

### 58. Как временно отложить проверку FK при пакетной загрузке (DEFERRABLE)? Пример реализации.
```sql
ALTER TABLE books
  ADD CONSTRAINT fk_books_authors FOREIGN KEY (author_id)
  REFERENCES authors(id) DEFERRABLE INITIALLY DEFERRED;

BEGIN;
SET CONSTRAINTS ALL DEFERRED;
-- Грузим данные в произвольном порядке
COMMIT;
```

---

### 59. Как обработать конфликт уникальности при INSERT (ON CONFLICT DO NOTHING)? Пример реализации.
```sql
INSERT INTO users(email) VALUES ('a@b.com')
ON CONFLICT DO NOTHING;  -- просто пропустить дубликат
```

---

### 60. Как предотвратить появление «осиротевших» строк при удалении родителей? Пример реализации.
**Идея:** Используйте `ON DELETE RESTRICT/NO ACTION` (запрет удаления) либо `ON DELETE CASCADE` (удалять детей вместе с родителем).
```sql
CREATE TABLE orders (
  id BIGSERIAL PRIMARY KEY
);
CREATE TABLE order_items (
  id BIGSERIAL PRIMARY KEY,
  order_id BIGINT REFERENCES orders(id) ON DELETE CASCADE
);
```

---

### 61. Какие поддерживаются действия внешнего ключа при удалении/обновлении (ON DELETE/UPDATE)? Пример реализации.
`RESTRICT`, `NO ACTION`, `CASCADE`, `SET NULL`, `SET DEFAULT`.
```sql
CREATE TABLE child (
  id INT PRIMARY KEY,
  parent_id INT REFERENCES parent(id)
    ON UPDATE CASCADE
    ON DELETE SET NULL
);
```

---

### 62. Как гарантировать транзакционность серии INSERT‑ов (BEGIN/COMMIT)? Пример реализации.
```sql
BEGIN;
INSERT INTO t VALUES (1);
INSERT INTO t VALUES (2);
-- при ошибке:
-- ROLLBACK;
COMMIT;
```

---

### 63. Что такое ограничение UNIQUE и где оно задаётся (уровень столбца/таблицы)? Пример реализации.
```sql
-- Уровень столбца
CREATE TABLE phones (
  id SERIAL PRIMARY KEY,
  number TEXT UNIQUE
);

-- Уровень таблицы (например, составной)
CREATE TABLE room_booking (
  room INT,
  start_at TIMESTAMPTZ,
  CONSTRAINT uq_room_start UNIQUE (room, start_at)
);
```

---

### 64. Как изменить значение по умолчанию столбца (ALTER COLUMN SET/DROP DEFAULT)? Пример реализации.
```sql
ALTER TABLE docs ALTER COLUMN updated_at SET DEFAULT now();
ALTER TABLE docs ALTER COLUMN updated_at DROP DEFAULT;
```

---

### 65. Как проверить существующие ограничения у таблицы (через \d и системные каталоги)? Пример реализации.
**Через psql:**
```
\d+ public.students
```
**Через системный каталог:**
```sql
SELECT conname, contype, pg_get_constraintdef(oid) AS def
FROM pg_constraint
WHERE conrelid = 'public.students'::regclass;
```
### 66. Какие целочисленные типы есть в PostgreSQL (SMALLINT, INTEGER, BIGINT)? Пример реализации.
**Коротко:** `SMALLINT` (2 байта, −32768..32767), `INTEGER` (4 байта, ~±2.1e9), `BIGINT` (8 байт, ~±9e18).
```sql
CREATE TABLE ints_demo (
  s SMALLINT,
  i INTEGER,
  b BIGINT
);
```

---

### 67. Как удалить столбец (DROP COLUMN) и что при этом важно учитывать? Пример реализации.
**Идея:** Удаление необратимо; зависит от зависимостей (индексы, FK, VIEW). Можно `CASCADE`, но осторожно.
```sql
ALTER TABLE orders DROP COLUMN comment;           -- если нет зависимостей
-- или
ALTER TABLE orders DROP COLUMN comment CASCADE;   -- удалит зависящие объекты
```

---

### 68. Как работать с типами даты/времени в INSERT (литералы и приведение типов)? Пример реализации.
```sql
CREATE TABLE dt_demo (
  d  DATE,
  t  TIME,
  ts TIMESTAMP,
  tz TIMESTAMPTZ
);

INSERT INTO dt_demo(d, t, ts, tz) VALUES
  ('2025-10-12', '13:45:00', '2025-10-12 13:45:00', '2025-10-12 13:45:00+03');

-- Явное приведение
INSERT INTO dt_demo(d) VALUES ('12-10-2025'::date);
```

---

### 69. Как документировать структуру с помощью COMMENT ON и поддерживать читаемость? Пример реализации.
**Идея:** Кратко и по делу: назначение таблицы, единицы измерения, ссылки на бизнес-правила.
```sql
COMMENT ON TABLE billing.invoice IS 'Счета на оплату. Хранит суммы с НДС.';
COMMENT ON COLUMN billing.invoice.total IS 'Итоговая сумма, RUB, с НДС';
```

---

### 70. Как настроить каскадное удаление зависимых записей (ON DELETE CASCADE)? Пример реализации.
```sql
CREATE TABLE parent (id BIGSERIAL PRIMARY KEY);
CREATE TABLE child  (
  id BIGSERIAL PRIMARY KEY,
  parent_id BIGINT REFERENCES parent(id) ON DELETE CASCADE
);
```

---

### 71. Что такое search_path и как он влияет на разрешение имён таблиц? Пример реализации.
**Идея:** Определяет порядок поиска схем при обращении к не fully-qualified именам.
```sql
SHOW search_path;
SET search_path TO app, public;      -- сначала app, затем public
SELECT * FROM users;                 -- возьмётся app.users, если есть
```

---

### 72. Как вставить одну строку в таблицу (INSERT ... VALUES ...)? Пример реализации.
```sql
INSERT INTO users(id, email, full_name)
VALUES (1, 'a@b.com', 'Anna');
```

---

### 73. Зачем в конце команды ставить точку с запятой в psql? Пример реализации.
**Идея:** В `psql` `;` завершает оператор (можно использовать `\g` как альтернативу).
```sql
SELECT 1 + 2;
```

---

### 74. Как объявить столбец NOT NULL и чем это отличается от NULL по умолчанию? Пример реализации.
**Идея:** `NOT NULL` запрещает `NULL`. По умолчанию столбец допускает `NULL`.
```sql
CREATE TABLE tnn (a INT NOT NULL, b INT); -- b допускает NULL
```

---

### 75. Как добавить/снять UNIQUE‑ограничение? Пример реализации.
```sql
-- Добавить
ALTER TABLE users ADD CONSTRAINT uq_users_email UNIQUE (email);
-- Снять
ALTER TABLE users DROP CONSTRAINT uq_users_email;
```

---

### 76. Как вставлять значения UUID? Пример реализации.
```sql
-- Требуется расширение pgcrypto или uuid-ossp для генерации
CREATE EXTENSION IF NOT EXISTS pgcrypto; -- для gen_random_uuid()

CREATE TABLE uuids (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), note TEXT);

INSERT INTO uuids(note) VALUES ('ok');           -- id сгенерируется
INSERT INTO uuids(id, note) VALUES
  ('550e8400-e29b-41d4-a716-446655440000', 'manual');
```

---

### 77. Как добавить ограничение к уже существующей таблице через ALTER TABLE? Пример реализации.
```sql
ALTER TABLE products
  ADD CONSTRAINT chk_price_nonneg CHECK (price >= 0);
```

---

### 78. Как проверить, что вставляемые значения соответствуют CHECK‑ограничениям? Пример реализации.
**Идея:** Перед включением ограничения — найти нарушения; при вставке несоответствие вызовет ошибку.
```sql
-- Проверка перед добавлением
SELECT * FROM products WHERE NOT (price >= 0);

-- Попытка вставки некорректного значения
INSERT INTO products(price) VALUES (-1); -- ошибка: violates check constraint
```

---

### 79. Как создать ограничение проверки формата с помощью регулярных выражений? Пример реализации.
```sql
ALTER TABLE users
  ADD CONSTRAINT chk_email_format CHECK (email ~* '^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$');
```

---

### 80. Как создать схему (CREATE SCHEMA) и назначить владельца? Пример реализации.
```sql
CREATE SCHEMA analytics AUTHORIZATION analyst_role;
```

---

### 81. Как создать временную таблицу (TEMP/TEMPORARY) и когда она полезна? Пример реализации.
**Идея:** Живёт в пределах сессии/транзакции; ускоряет промежуточные расчёты.
```sql
CREATE TEMP TABLE tmp_calc (id INT, v NUMERIC);
INSERT INTO tmp_calc VALUES (1, 2.5);
```

---

### 82. Как задать FK с действием SET NULL и какие требования к столбцу при этом? Пример реализации.
**Идея:** Столбец-референс должен допускать `NULL`.
```sql
CREATE TABLE orders (id BIGSERIAL PRIMARY KEY);
CREATE TABLE order_items (
  id BIGSERIAL PRIMARY KEY,
  order_id BIGINT REFERENCES orders(id) ON DELETE SET NULL
);
```

---

### 83. Как вставить несколько строк одной командой INSERT? Пример реализации.
```sql
INSERT INTO cities(name, country)
VALUES ('Paris','FR'), ('Berlin','DE'), ('Rome','IT');
```

---

### 84. Как скопировать структуру существующей таблицы без данных? Пример реализации.
```sql
CREATE TABLE copy_of_products (LIKE products INCLUDING ALL);
```

---

### 85. Чем различаются регистр букв и пробелы в SQL-синтаксисе PostgreSQL? Пример реализации.
**Идея:** Ключевые слова нечувствительны к регистру; идентификаторы без кавычек приводятся к нижнему регистру; пробелы разделяют токены.
```sql
SELECT * FROM Public.Users;   -- ищет public.users (если без кавычек)
SELECT * FROM "Public"."Users"; -- ищет объект с точным регистром (не рекомендуется)
```

---

### 86. Как удалить (DROP) ограничение по имени? Пример реализации.
```sql
ALTER TABLE accounts DROP CONSTRAINT chk_balance_nonneg;
```

---

### 87. Как обеспечить, чтобы значения ссылались только на существующие записи? Пример реализации.
**Идея:** Используйте `FOREIGN KEY`.
```sql
CREATE TABLE authors (id INT PRIMARY KEY);
CREATE TABLE books (
  id INT PRIMARY KEY,
  author_id INT REFERENCES authors(id)
);
```

---

### 88. Как явно перечислить столбцы при INSERT и почему это практика «по умолчанию»? Пример реализации.
**Идея:** Явное перечисление защищает от изменений схемы и повышает читаемость.
```sql
INSERT INTO users(email, full_name) VALUES ('a@b.com', 'Anna');
```

---

### 89. Как убедиться, что все обязательные поля заполнены при вставке данных? Пример реализации.
**Идея:** Объявляйте поля `NOT NULL`, используйте DEFAULT и триггеры нормализации.
```sql
CREATE TABLE contacts (
  id BIGSERIAL PRIMARY KEY,
  name TEXT NOT NULL,
  email TEXT NOT NULL
);
```

---

### 90. Когда использовать NUMERIC/DECIMAL, а когда REAL/DOUBLE PRECISION? Пример реализации.
**Идея:** Для денежных/точных расчётов — `NUMERIC(p,s)`; для научных/приближённых — `REAL/DOUBLE PRECISION`.
```sql
CREATE TABLE money_tx (amount NUMERIC(12,2));       -- точность важна
CREATE TABLE telemetry (value DOUBLE PRECISION);    -- производительность и диапазон
```


### 91. Что такое идентификатор и когда нужно брать его в двойные кавычки? Пример реализации.
**Идея:** Идентификаторы — имена объектов (схем, таблиц, столбцов, индексов). Без кавычек PostgreSQL приводит их к нижнему регистру. Кавычки **обязательны**, если имя: содержит пробелы/спецсимволы, начинается с цифры, совпадает с ключевым словом, либо нужно сохранить регистр.
```sql
-- ПЛОХО: придётся всегда писать с кавычками и точным регистром
CREATE TABLE "User Accounts" ("Id" INT, "Order" INT);

-- ХОРОШО: простые имена без кавычек
CREATE TABLE user_accounts (id INT, "order" INT); -- "order" зарезервировано → лучше order_no
```
> Рекомендация: по возможности избегайте кавычек в схемах и таблицах.

---

### 92. Как вернуть сгенерированные значения при INSERT (RETURNING)? Пример реализации.
```sql
CREATE TABLE notes (
  id BIGSERIAL PRIMARY KEY,
  title TEXT NOT NULL
);

INSERT INTO notes(title) VALUES ('hello')
RETURNING id;                -- вернёт созданный id

-- С несколькими столбцами
INSERT INTO notes(title) VALUES ('world')
RETURNING id, title;
```

---

### 93. Ошибка при запросе.
**Идея:** Частая причина — регистр идентификаторов и отсутствие столбца.
```sql
CREATE TABLE demo (full_name TEXT);

-- Ошибка:
SELECT Full_Name FROM demo;
-- ERROR:  column "full_name" does not exist
-- Причина: без кавычек идентификаторы приводятся к нижнему регистру.

-- Исправления:
SELECT full_name FROM demo;           -- 1) верный регистр без кавычек
-- или
SELECT "full_name" FROM demo;         -- 2) точное имя в кавычках (не нужно здесь)
```
> Другие типовые: `type mismatch` при приводе типов, `relation does not exist` при неверной схеме/search_path.

---

### 94. Как создать таблицу на основе результата запроса (CREATE TABLE AS)? Пример реализации.
```sql
CREATE TABLE top_customers AS
SELECT customer_id, SUM(total) AS total_spent
FROM orders
GROUP BY customer_id
HAVING SUM(total) > 1000;

-- Только структура без данных
CREATE TABLE top_customers_empty AS
SELECT customer_id, SUM(total) AS total_spent
FROM orders
WHERE false;
```
> Альтернатива: `CREATE TABLE ... (LIKE src INCLUDING ALL);`

---

### 95. Как вставить данные из другой таблицы (INSERT ... SELECT ...)? Пример реализации.
```sql
INSERT INTO archive_orders (id, customer_id, total, created_at)
SELECT id, customer_id, total, created_at
FROM orders
WHERE created_at < now() - INTERVAL '1 year';
```

---

### 96. Как выбрать типы данных для каждого столбца с учётом ограничений и будущих запросов? Пример реализации.
**Идея (гайдлайн):**
- Целые: `smallint` / `int` / `bigint` по диапазону.
- Денежные/точные: `numeric(p,s)`.
- Время «момента»: `timestamptz`; локальные даты — `date`/`timestamp`.
- Короткие коды фикс. длины — `char(n)`; обычный текст — `text` или `varchar(n)` (если нужен лимит).
- Флаги — `boolean`.
- Небольшие фиксированные множества — `enum` (редко меняется) или справочники с FK (если список меняется).
- Часто фильтруемый JSON — лучше `jsonb` + индексы.
```sql
CREATE TABLE orders (
  id           BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  customer_id  BIGINT NOT NULL REFERENCES customers(id) ON DELETE RESTRICT,
  total        NUMERIC(12,2) CHECK (total >= 0),
  status       TEXT CHECK (status IN ('new','paid','cancelled')),
  created_at   TIMESTAMPTZ NOT NULL DEFAULT now()
);
```

---

### 97. Какие типы даты и времени существуют (DATE, TIME, TIMESTAMP, INTERVAL)? Пример реализации.
- `DATE` — календарная дата.
- `TIME [WITH/WITHOUT TIME ZONE]` — время суток.
- `TIMESTAMP [WITHOUT] TIME ZONE` (`TIMESTAMPTZ`) — момент времени (рекомендуется `TIMESTAMPTZ`).
- `INTERVAL` — длительность.
```sql
SELECT DATE '2025-10-12',
       TIME '13:40:00',
       TIMESTAMPTZ '2025-10-12 13:40:00+03',
       INTERVAL '3 days 2 hours';
```

---

### 98. Как задать ограничение CHECK, использующее функции (например, длину строки)? Пример реализации.
```sql
ALTER TABLE users
  ADD CONSTRAINT chk_name_len CHECK (char_length(full_name) BETWEEN 2 AND 100);
```

---

### 99. Чем отличаются CHAR(n), VARCHAR(n) и TEXT? Пример реализации.
- `CHAR(n)` — фиксированная длина, дополняется пробелами (редко нужен).
- `VARCHAR(n)` — до `n` символов (ограничение длины на уровне типа).
- `TEXT` — произвольная длина (часто предпочтителен + отдельный `CHECK` при необходимости).
```sql
CREATE TABLE strings_demo (
  c CHAR(5),
  v VARCHAR(10),
  t TEXT
);
```

---

### 100. Что такое составной (composite) тип? Пример реализации.
**Идея:** Пользовательский тип из нескольких полей; можно хранить в столбце и использовать в функциях.
```sql
CREATE TYPE person_name AS (
  first TEXT,
  last  TEXT
);

CREATE TABLE persons (
  id BIGSERIAL PRIMARY KEY,
  name person_name NOT NULL
);

INSERT INTO persons(name) VALUES (ROW('Anna','Kotova'));
SELECT (name).first, (name).last FROM persons;
```

---

### 101. Как задать значение по умолчанию для столбца (DEFAULT)? Пример реализации.
```sql
CREATE TABLE docs (
  id BIGSERIAL PRIMARY KEY,
  created_at TIMESTAMPTZ NOT NULL DEFAULT now(),
  locale TEXT DEFAULT 'ru'
);
```

---

### 102. Как вставить строку, используя DEFAULT для части столбцов? Пример реализации.
```sql
INSERT INTO docs DEFAULT VALUES;  -- все по умолчанию

INSERT INTO docs(locale) VALUES (DEFAULT); -- только для указанной колонки
```

---

### 103. Как создать таблицу с идентичностями: GENERATED {ALWAYS|BY DEFAULT} AS IDENTITY? Пример реализации.
```sql
CREATE TABLE id_demo (
  id INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,  -- всегда генерируется (нельзя задавать вручную)
  note TEXT
);

CREATE TABLE id_demo2 (
  id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, -- можно переопределить вручную при необходимости
  note TEXT
);
```

---

### 104. Как сделать ограничение частично проверяемым (NOT VALID) и затем VALIDATE CONSTRAINT? Пример реализации.
**Идея:** Добавить ограничение без проверки существующих данных, затем валидировать без долгой блокировки вставок.
```sql
ALTER TABLE users
  ADD CONSTRAINT chk_phone_digits CHECK (phone ~ '^[0-9]+$') NOT VALID;

ALTER TABLE users VALIDATE CONSTRAINT chk_phone_digits;
```

---

### 105. Как тестировать ограничения: позитивные и негативные сценарии на простых данных? Пример реализации.
```sql
-- Позитив: проходит
INSERT INTO users(full_name, email) VALUES ('Ivan Petrov', 'i@ex.com');

-- Негатив: нарушает CHECK длины имени
INSERT INTO users(full_name, email) VALUES ('I', 'x@ex.com');  -- ERROR
```

---

### 106. Чем отличается PRIMARY KEY от UNIQUE + NOT NULL? Пример реализации.
**Идея:** PK = UNIQUE + NOT NULL + семантическая «главная» ссылка таблицы (внешние ключи по умолчанию ссылаются на PK). В таблице может быть **только один** PK, а UNIQUE может быть несколько.
```sql
CREATE TABLE t (
  a INT PRIMARY KEY,
  b INT UNIQUE NOT NULL
);
-- На b можно тоже ссылаться FK (PostgreSQL позволяет), но PK — основной идентификатор.
```

---

### 107. Что такое UUID и когда его использовать как ключ? Пример реализации.
**Идея:** 128‑битный уникальный идентификатор, удобен для распределённых систем/скрытия порядка вставок. Минусы: размер индекса/кеша.
```sql
CREATE EXTENSION IF NOT EXISTS pgcrypto;
CREATE TABLE docs_uuid (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  payload JSONB
);
```

---

### 108. Что такое массивы (ARRAY) и для чего они могут пригодиться? Пример реализации.
**Идея:** Нативные массивы (`type[]`) для тегов, координат и т.п. Удобно с операторами `@>`, `&&`, `ANY`.
```sql
CREATE TABLE posts (
  id BIGSERIAL PRIMARY KEY,
  tags TEXT[]
);

INSERT INTO posts(tags) VALUES (ARRAY['sql','postgres','tips']);
-- Найти посты с тегом 'sql'
SELECT * FROM posts WHERE 'sql' = ANY(tags);
```
